# 불투명 타입 (Opaque Types)과 Any

파이썬에서는 변수 선언 시 어떤 타입의 값인지 알 필요가 없기 때문에 오리 타이핑(Duck Typing)을 자유롭게 쓸 수 있습니다. Swift에서는 타입 안전성을 지키며 다형성을 제공하기 위해 `some`과 `any`라는 키워드를 사용합니다.

### Opaque Types (`some`)

반환 타입의 구체적인 구현 세부사항을 감추면서 외부에는 특정 프로토콜에 정의된 기능만 드러내는 방법입니다. 파이썬의 타입 힌트 (예: `-> Iterator[int]`)와 유사한 아이디어입니다.

```swift
protocol Shape {
    func draw() -> String
}

struct Triangle: Shape {
    let size: Int
    func draw() -> String { "🔺" }
}

struct Square: Shape {
    let size: Int
    func draw() -> String { "🟥" }
}

// 명시적으로 타입을 숨기고 Shape라는 것만 노출
func makeShape() -> some Shape {
    return Triangle(size: 3)
}

let shape = makeShape()
print(shape.draw()) // "🔺"
```

SwiftUI에서는 모든 뷰가 `some View`를 반환하는 데 사용되어 반환되는 UI 구조가 최적화(타입을 알 수 있으므로)될 수 있게 돕습니다.

### Existential Types (`any`)

`some`은 컴파일러가 반환되는 실제 타입을 알고 있어야 하지만, 런타임에 여러 종류의 프로토콜 구현체를 다루려면 `any`를 사용합니다. 동적 다형성이 필요할 때 사용되는 방식입니다.

```swift
func printShapes(_ shapes: [any Shape]) {
    for shape in shapes {
        print(shape.draw())
    }
}

// 삼각형과 정사각형(모두 Shape) 리스트 생성
let myShapes: [any Shape] = [Triangle(size: 1), Square(size: 2)]
printShapes(myShapes)
```

파이썬이라면 단순히 리스트에 담긴 객체의 메서드를 호출하겠지만, `any`는 런타임에 타입 박싱 비용을 갖게 된다는 점을 Swift는 명확히 합니다 (성능 관점에서 `some` 사용이 권장됨).
